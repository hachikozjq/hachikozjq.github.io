{"title":"MySQL深分页解决","uid":"2d7ed058cbb731faae14353326cf521a","slug":"数据库/MySQL深分页解决","date":"2022-02-21T07:10:51.000Z","updated":"2022-03-05T07:14:53.638Z","comments":true,"path":"api/articles/数据库/MySQL深分页解决.json","keywords":"Java","cover":"https://gitee.com/hachikozjq/images/raw/master/blog/202202211612556.jpeg","content":"<p>今天在工作中碰到了MySQL深分页的问题，场景为每页大小50，查到70W后的页面试就会超时3s以上，查询慢SQL发现，是最基础的一条limit语句导致，且几乎可以忽略查询条件，执行计划发现Using where，很显然几百万的数据进行了回表查询，于是从这个问题切入，怎么能让它不进行回表？<br>已知如果查询字段仅为主键的话，那就不会进行回表了，因此大致思路为：</p>\n<ol>\n<li>第一步：先查出主键</li>\n<li>第二步：通过in主键的方法，查询该页的数据</li>\n</ol>\n<p>简单来说就是一条语句拆分成两条语句，来解决回表问题，经测试并上线后，MySQL深分页就此解决。</p>\n","text":"今天在工作中碰到了MySQL深分页的问题，场景为每页大小50，查到70W后的页面试就会超时3s以上，查询慢SQL发现，是最基础的一条limit语句导致，且几乎可以忽略查询条件，执行计划发现Using where，很显然几百万的数据进行了回表查询，于是从这个问题切入，怎么能让它不进...","link":"","photos":[],"count_time":{"symbolsCount":260,"symbolsTime":"1 mins."},"categories":[{"name":"运维","slug":"运维","count":5,"path":"api/categories/运维.json"}],"tags":[{"name":"MySQL","slug":"MySQL","count":1,"path":"api/tags/MySQL.json"}],"toc":"","author":{"name":"Hachiko_JQ","slug":"blog-author","avatar":"https://gitee.com/hachikozjq/images/raw/master/blog/202202182057148.jpeg","link":"/","description":"✌️给生活比个耶✌️","socials":{"github":"https://github.com/hachikozjq","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/1736409885","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Jetbrains系列产品重置试用方法","uid":"fd270390fcc2a51eddfa94a5e97c1100","slug":"运维/Jetbrains系列产品重置试用方法","date":"2022-02-22T14:04:09.000Z","updated":"2022-03-05T07:14:53.638Z","comments":true,"path":"api/articles/运维/Jetbrains系列产品重置试用方法.json","keywords":"Java","cover":"https://gitee.com/hachikozjq/images/raw/master/blog/202202211612556.jpeg","text":"注：本文转载于zhi神zhile 没错，jetbrains-agent这个项目停止了。市面上漫天飞的各种最新都是其他大神的魔改版本。[&#x2F;斜眼]我不是要专门写个博文来说明jetbrains-agent项目已经停止，然后缅怀感叹一番。这篇文章是想和大家聊聊另一种思路。 本项...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"运维","slug":"运维","count":5,"path":"api/categories/运维.json"}],"tags":[{"name":"Idea","slug":"Idea","count":1,"path":"api/tags/Idea.json"}],"author":{"name":"Hachiko_JQ","slug":"blog-author","avatar":"https://gitee.com/hachikozjq/images/raw/master/blog/202202182057148.jpeg","link":"/","description":"✌️给生活比个耶✌️","socials":{"github":"https://github.com/hachikozjq","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/1736409885","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"Mac下Alfred的安装","uid":"973d1c20dd427247706c6876cb3e03ea","slug":"运维/Mac下Alfred的安装","date":"2022-02-18T09:44:55.000Z","updated":"2022-03-05T07:14:53.639Z","comments":true,"path":"api/articles/运维/Mac下Alfred的安装.json","keywords":"Java","cover":"https://gitee.com/hachikozjq/images/raw/master/blog/202202211612556.jpeg","text":"附件：Alfred 4.6.2.dmg，提取码：6q11，或者Xclient下载最新破解的也可以。 权限问题：sudo chown -R $(whoami) $(npm config get prefix)/&#123;lib/node_modules,bin,share&#12...","link":"","photos":[],"count_time":{"symbolsCount":392,"symbolsTime":"1 mins."},"categories":[{"name":"运维","slug":"运维","count":5,"path":"api/categories/运维.json"}],"tags":[{"name":"软件","slug":"软件","count":3,"path":"api/tags/软件.json"}],"author":{"name":"Hachiko_JQ","slug":"blog-author","avatar":"https://gitee.com/hachikozjq/images/raw/master/blog/202202182057148.jpeg","link":"/","description":"✌️给生活比个耶✌️","socials":{"github":"https://github.com/hachikozjq","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/1736409885","zhihu":"","csdn":"","juejin":"","customs":{}}}}}